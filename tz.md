# Техническое задание на разработку веб-приложения "Облачное хранилище файлов"

## 1. Введение

**Название проекта:** Облачное хранилище файлов

**Описание проекта:**  
Разработка веб-приложения, позволяющего пользователям загружать, хранить, управлять и делиться своими файлами через удобный и безопасный интерфейс. Система должна обеспечивать надежную защиту данных, интуитивно понятный интерфейс и высокую производительность.

## 2. Цели и задачи проекта

- Предоставить пользователям безопасное и надежное хранилище для их файлов.
- Обеспечить удобный веб-интерфейс для управления файлами.
- Реализовать функции регистрации, авторизации и управления профилем пользователя.
- Обеспечить возможность обмена файлами между пользователями.
- Гарантировать безопасность и конфиденциальность данных пользователей.

## 3. Функциональные требования

### 3.1. Регистрация и авторизация

- Пользователь может зарегистрироваться, указав необходимые данные (e-mail, пароль и т.д.).
- Реализовать подтверждение e-mail при регистрации.
- Пользователь может войти в систему с использованием e-mail и пароля.
- Возможность восстановления пароля через e-mail.

### 3.2. Управление файлами

- Загрузка файлов различных типов и размеров с установленными ограничениями (5 мб).
- Просмотр списка загруженных файлов с информацией о каждом файле (имя, размер, дата загрузки, тип).
- Удаление файлов с возможностью восстановления из корзины.
- Предпросмотр изображений и других поддерживаемых типов файлов.
- Сортировка и фильтрация файлов по различным параметрам.

### 3.3. Обмен файлами

- Возможность поделиться файлом с другими пользователями через ссылку.
- Управление правами доступа к файлам (только просмотр, редактирование и т.д.).
- Отслеживание статистики по скачиваниям и просмотрам общих файлов.

### 3.4. Профиль пользователя

- Просмотр и редактирование персональной информации.

### 3.5. Безопасность

- Шифрование паролей и конфиденциальных данных.
- Использование протокола HTTPS для защиты данных при передаче.
- Реализация защиты от CSRF, XSS и других распространенных атак.

## 4. Нефункциональные требования

### 4.1. Производительность

- Время отклика системы не должно превышать 2 секунд на большинство операций.

### 4.2. Масштабируемость

- Возможность горизонтального и вертикального масштабирования системы.

### 4.3. Надежность

- Обеспечение резервного копирования данных.
- Минимизация времени простоя системы (доступность не менее 99.5%).

### 4.4. Юзабилити

- Интуитивно понятный и современный интерфейс.
- Адаптивный дизайн для поддержки различных устройств (ПК, планшеты, мобильные).

### 4.5. Совместимость

- Поддержка современных браузеров (Chrome, Firefox, Safari, Edge).
- Кроссплатформенность (Windows, macOS, Linux).

## 5. Архитектура системы

### 5.1. Backend

- **Фреймворк:** NestJS
- **Язык программирования:** TypeScript
- **Модули:**
  - **auth:** Аутентификация и авторизация пользователей.
  - **users:** Управление данными пользователей.
  - **files:** Управление загрузкой, хранением и доступом к файлам.
- **Структура:**
  - **Controllers:** Обработка входящих HTTP-запросов.
  - **Services:** Бизнес-логика приложения.
  - **Entities/Models:** Определение структур данных и моделей БД.
  - **Guards и Strategies:** Безопасность и авторизация маршрутов.
- **База данных:** PostgreSQL.
- **ORM:** TypeORM.

### 5.2. Frontend

- **Фреймворк:** Next.js (React)
- **Язык программирования:** TypeScript
- **Структура:**
  - **Components:** Переиспользуемые компоненты интерфейса.
  - **Pages:** Страницы приложения с маршрутизацией.
  - **Layouts:** Общие шаблоны для страниц.
  - **Core:** Основные утилиты и настройки (например, Axios).
  - **Styles:** SCSS-модули для стилизации компонентов.
  - **Utils:** Вспомогательные функции и хелперы.
- **Библиотеки:**
  - Axios для HTTP-запросов.
  - SCSS для стилизации.
  - Дополнительные библиотеки по необходимости (например, Redux для управления состоянием).

## 6. Технические требования

### 6.1. Backend

- Реализация RESTful API для взаимодействия с Frontend.
- Использование JWT для аутентификации.
- Валидация данных на уровне DTO.
- Обработка и хранение файлов в локальной файловой системе (`uploads`) с возможностью перехода на облачное хранилище.
- Логирование и обработка ошибок.

### 6.2. Frontend

- Реализация клиентской логики для взаимодействия с API.
- Хранение токена авторизации в безопасном месте (cookies).
- Реализация защиты маршрутов на клиентской стороне.
- Информирование пользователя об ошибках и процессе загрузки данных.

## 7. API эндпоинты (пример)

### 7.1. Аутентификация

- `POST /auth/register` — Регистрация нового пользователя.
- `POST /auth/login` — Вход пользователя.
- `POST /auth/logout` — Выход пользователя.

### 7.2. Пользователи

- `GET /users/me` — Получение данных текущего пользователя.
- `PUT /users/me` — Обновление данных профиля.
- `GET /users/:id` — Получение данных другого пользователя (с ограничениями).

### 7.3. Файлы

- `GET /files` — Получение списка файлов пользователя.
- `POST /files` — Загрузка нового файла.
- `GET /files/:id` — Получение информации о файле.
- `DELETE /files/:id` — Удаление файла.
- `POST /files/:id/share` — Создание ссылки для общего доступа.

## 8. База данных

### 8.1. Таблица пользователей (`users`)

- `id`: UUID, первичный ключ.
- `email`: строка, уникальный.
- `password`: строка, хэшированный пароль.
- `name`: строка, имя пользователя.
- `avatar`: строка, путь к изображению аватара.
- `created_at`: дата и время создания.
- `updated_at`: дата и время последнего обновления.

### 8.2. Таблица файлов (`files`)

- `id`: UUID, первичный ключ.
- `user_id`: UUID, внешний ключ на таблицу пользователей.
- `name`: строка, имя файла.
- `path`: строка, путь к файлу на сервере.
- `size`: целое число, размер файла в байтах.
- `type`: строка, MIME-тип файла.
- `is_shared`: булево, флаг общего доступа.
- `created_at`: дата и время загрузки.
- `updated_at`: дата и время последнего обновления.

## 9. Безопасность

- Пароли хранятся с использованием надежных хэш-функций.
- Использование SSL/TLS для шифрования данных при передаче.
- Защита от SQL-инъекций посредством ORM.
- Ограничение количества неудачных попыток входа для предотвращения брутфорса.
- Регулярное обновление зависимостей для устранения уязвимостей.

## 10. Тестирование

- Ручные тесты для проверки взаимодействия между Backend и Frontend.
- Тестирование пользовательского интерфейса на удобство и отсутствие ошибок.

## 11. Документация

- Подробное описание API с примерами запросов и ответов (Swagger).
- Инструкции по развертыванию и запуску проекта.
- Описание структуры проекта и используемых технологий.

## 12. Развертывание

- Среда исполнения: Node.js.

## 13. Сроки выполнения

- **Анализ и проектирование:** 2 недели.
- **Разработка Backend:** 4 недели.
- **Разработка Frontend:** 4 недели (параллельно с Backend).
- **Тестирование и отладка:** 2 недели.
- **Развертывание и документация:** 1 неделя.
- **Общий срок выполнения:** 9 недель.

## 14. Ресурсы и инструменты

- **Система контроля версий:** Git (репозиторий на GitHub).
- **Базы данных:** PostgreSQL.

## 15. Требования к качеству

- Соблюдение код-стайла и стандартов разработки.
- Понятная и поддерживаемая архитектура кода.

## 16. Дополнительные требования

- Возможность масштабирования функционала (добавление новых функций без значительных изменений в существующем коде).
